 <!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã</title>
<!-- data.js ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶æ body-‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® -->
<script src="Sub/data.js"></script> 


<style>
    /* Google Font Import */
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&display=swap');

    :root {
        --bg-color: #f8f9fa; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
        --container-bg: #ffffff;
        --text-color: #343a40; /* ‡¶ó‡¶æ‡ßù ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
        --primary-color: #00796b; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶∏‡¶¨‡ßÅ‡¶ú */
        --secondary-color: #80cbc4; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶∏‡¶¨‡ßÅ‡¶ú */
        --hint-color: #ff8f00;   /* ‡¶ï‡¶Æ‡¶≤‡¶æ */
        --shop-color: #1e88e5;   /* ‡¶®‡ßÄ‡¶≤ */
        --tile-bg: #e0f2f1;      /* ‡¶ü‡¶æ‡¶á‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
        --tile-border: #b2dfdb;
        --tile-hover-bg: #c8e6c9;
        --tile-disabled-bg: #e0e0e0;
        --input-bg: #e0f7fa;
        --input-border: #b2ebf2;
        --correct-color: #2e7d32; /* ‡¶ó‡¶æ‡ßù ‡¶∏‡¶¨‡ßÅ‡¶ú */
        --incorrect-color: #c62828; /* ‡¶ó‡¶æ‡ßù ‡¶≤‡¶æ‡¶≤ */
        --border-color: #dee2e6; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
        --reload-btn-bg: #ffc107; /* ‡¶π‡¶≤‡ßÅ‡¶¶ */
        --reload-btn-border: #ffb300;
        --reload-btn-text: #212529;
        --backspace-btn-bg: #ffcc80; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡¶Æ‡¶≤‡¶æ */
        --backspace-btn-border: #ffb74d;
        --backspace-btn-text: #212529;
        --free-hint-btn-bg: #4caf50; /* ‡¶â‡¶ú‡ßç‡¶ú‡ßç‡¶¨‡¶≤ ‡¶∏‡¶¨‡ßÅ‡¶ú */
        --free-hint-btn-border: #388e3c;
        --free-hint-btn-text: white;
        --proceed-spin-bg: #43a047;
        --proceed-spin-border: #388e3c;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: 'Noto Sans Bengali', sans-serif;
        display: flex;
        flex-direction: column; /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶â‡¶≤‡ßç‡¶≤‡¶Æ‡ßç‡¶¨‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
        align-items: center; /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
        min-height: 100vh;
        margin: 0;
        padding: 10px 15px; /* ‡¶∏‡¶æ‡¶Æ‡¶ó‡ßç‡¶∞‡¶ø‡¶ï ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        box-sizing: border-box;
        line-height: 1.6;
    }

    .ad-container {
        width: 100%;
        max-width: 728px; /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• */
        height: auto; /* ‡¶Ö‡¶ü‡ßã ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ, ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá */
        margin: 15px auto; /* ‡¶â‡¶™‡¶∞‡ßá-‡¶®‡¶ø‡¶ö‡ßá ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶®, ‡¶™‡¶æ‡¶∂‡¶æ‡¶™‡¶æ‡¶∂‡¶ø ‡¶Ö‡¶ü‡ßã ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶ø‡¶Ç */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .game-container {
        background-color: var(--container-bg);
        border-radius: 16px; /* ‡¶Ü‡¶∞‡¶ì ‡¶Æ‡ßã‡¶≤‡¶æ‡ßü‡ßá‡¶Æ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
        padding: 25px 30px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        width: 100%;
        max-width: 550px;
        box-shadow: var(--shadow);
        text-align: center;
        margin-top: 10px; /* ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨ */
        margin-bottom: 10px; /* ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨ */
        transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out; /* Added for effects */
    }
    .game-container-victory {
        box-shadow: 0 0 15px 7px gold, 0 0 25px 12px var(--correct-color);
    }
    .game-container-lose {
        box-shadow: 0 0 15px 7px var(--incorrect-color), 0 0 25px 12px #ff0000;
        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }

    @keyframes shake {
      10%, 90% {
        transform: translate3d(-1px, 0, 0);
      }
      20%, 80% {
        transform: translate3d(2px, 0, 0);
      }
      30%, 50%, 70% {
        transform: translate3d(-3px, 0, 0);
      }
      40%, 60% {
        transform: translate3d(3px, 0, 0);
      }
    }


    .status-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶ß‡¶æ‡¶® */
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
        font-size: 1em;
        font-weight: bold;
    }

    .status-item {
        background-color: var(--bg-color);
        padding: 6px 12px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßú ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        border-radius: 20px; /* ‡¶Ü‡¶∞‡¶ì ‡¶ó‡ßã‡¶≤‡¶æ‡¶ï‡¶æ‡¶∞ */
        color: var(--primary-color);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    #hints-display {
         color: var(--hint-color);
    }

    .shop-button {
        background-color: var(--shop-color);
        color: white;
        border: none;
        padding: 7px 15px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        border-radius: 20px;
        cursor: pointer;
        font-family: 'Noto Sans Bengali', sans-serif;
        font-size: 0.9em;
        transition: background-color 0.2s, opacity 0.2s, transform 0.1s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .shop-button:hover:not(:disabled) {
         background-color: #1573c4; /* ‡¶π‡ßã‡¶≠‡¶æ‡¶∞‡ßá ‡¶ó‡¶æ‡ßù ‡¶®‡ßÄ‡¶≤ */
         transform: translateY(-1px);
    }
    .shop-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .instructions {
        font-size: 1.15em; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßú ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
        color: #495057; /* ÏïΩÍ∞Ñ ‡¶ó‡¶æ‡ßù ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
        margin-bottom: 20px;
    }

    .jumbled-tiles-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px; /* ‡¶ü‡¶æ‡¶á‡¶≤‡¶∏‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ */
        margin-bottom: 25px;
        min-height: 50px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ */
        padding: 10px;
        background-color: var(--bg-color);
        border-radius: 10px; /* ‡¶ó‡ßã‡¶≤‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ï‡ßã‡¶£ */
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    }

    .tile {
        background-color: var(--tile-bg);
        border: 1px solid var(--tile-border);
        color: var(--primary-color);
        font-size: 1.6em; /* ‡¶¨‡ßú ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ */
        font-weight: bold;
        padding: 8px 15px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s, transform 0.1s, opacity 0.2s, box-shadow 0.2s;
        user-select: none;
        min-width: 40px; /* ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• */
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .tile:hover:not(:disabled) {
        background-color: var(--tile-hover-bg);
        transform: translateY(-2px); /* ‡¶π‡ßã‡¶≠‡¶æ‡¶∞‡ßá ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶∞‡ßá ‡¶â‡¶†‡¶¨‡ßá */
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .tile:active:not(:disabled) {
        transform: scale(0.95);
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .tile:disabled {
        background-color: var(--tile-disabled-bg);
        color: #757575; /* ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡ßü ‡¶∞‡¶ô */
        cursor: not-allowed;
        opacity: 0.7;
        border-color: #bdbdbd;
    }

    .input-area-container {
         margin-bottom: 20px;
         padding: 15px;
         background-color: var(--input-bg);
         border: 1px dashed var(--input-border);
         border-radius: 10px;
         min-height: 50px;
         display: flex;
         align-items: center;
         justify-content: center;
         box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    }

    #input-display {
        font-size: 1.8em; /* ‡¶Ü‡¶∞‡¶ì ‡¶¨‡ßú ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶® */
        font-weight: bold;
        color: var(--primary-color);
        letter-spacing: 3px; /* ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ */
        word-break: break-all;
        min-height: 1.5em; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ */
    }

     .controls {
         margin-bottom: 20px;
         display: flex;
         justify-content: center;
         gap: 10px; /* ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ */
         flex-wrap: wrap;
     }
     .control-button {
        font-family: 'Noto Sans Bengali', sans-serif;
        font-size: 0.95em; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßú ‡¶´‡¶®‡ßç‡¶ü */
        padding: 10px 18px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        border-radius: 25px; /* ‡¶Ü‡¶∞‡¶ì ‡¶ó‡ßã‡¶≤‡¶æ‡¶ï‡¶æ‡¶∞ */
        cursor: pointer;
        transition: background-color 0.2s, opacity 0.2s, transform 0.1s, box-shadow 0.2s;
        border: 1px solid transparent;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
     }
     .control-button:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
     }
     .control-button:disabled {
         opacity: 0.5;
         cursor: not-allowed;
         box-shadow: none;
     }

     #reload-game-button {
        background-color: var(--reload-btn-bg);
        border-color: var(--reload-btn-border);
        color: var(--reload-btn-text);
     }
     #reload-game-button:hover:not(:disabled) { background-color: #ffb300; }

     #backspace-button {
        background-color: var(--backspace-btn-bg);
        border-color: var(--backspace-btn-border);
        color: var(--backspace-btn-text);
     }
     #backspace-button:hover:not(:disabled) { background-color: #ffb74d; }

     #free-hint-button {
        background-color: var(--free-hint-btn-bg);
        border-color: var(--free-hint-btn-border);
        color: var(--free-hint-btn-text);
     }
     #free-hint-button:hover:not(:disabled) { background-color: #388e3c; }

      #hint-button {
          background-color: var(--hint-color);
          border-color: #f57c00; /* ‡¶ó‡¶æ‡ßù ‡¶ï‡¶Æ‡¶≤‡¶æ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
          color: white;
      }
      #hint-button:hover:not(:disabled) { background-color: #f57c00; }

    #message-area {
        margin-top: 15px;
        min-height: 30px; /* ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ */
        font-size: 1.15em; /* ‡¶¨‡ßú ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ */
        font-weight: bold;
        padding: 5px;
    }
    #message-area.correct { color: var(--correct-color); }
    #message-area.incorrect { color: var(--incorrect-color); }
    #message-area.level-up { color: var(--primary-color); }
    #message-area.info { color: var(--hint-color); }
    #message-area.shop { color: var(--shop-color); }

    /* Spin Wheel Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.65); /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ó‡¶æ‡ßù ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        padding: 15px;
        box-sizing: border-box;
    }

    .modal-content {
        background-color: var(--container-bg);
        padding: 30px; /* ‡¶Æ‡¶°‡¶æ‡¶≤‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        border-radius: 16px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
        text-align: center;
        max-width: 420px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ö‡¶ì‡ßú‡¶æ ‡¶Æ‡¶°‡¶æ‡¶≤ */
        width: 100%;
    }

    .modal-content h2 {
        color: var(--primary-color);
        margin-top: 0;
        margin-bottom: 25px;
        font-size: 1.8em; /* ‡¶¨‡ßú ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ */
    }

    .wheel-container {
        position: relative;
        margin-bottom: 30px;
    }

    .wheel {
        display: flex;
        flex-direction: column;
        border: 3px solid var(--primary-color);
        border-radius: 12px; /* ‡¶Æ‡ßã‡¶≤‡¶æ‡ßü‡ßá‡¶Æ ‡¶ï‡ßã‡¶£ */
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .wheel-segment {
        padding: 14px 10px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        font-size: 1.1em;
        font-weight: bold;
        border-bottom: 1px solid var(--tile-border);
        background-color: var(--tile-bg);
        color: var(--text-color);
        transition: background-color 0.1s, color 0.1s;
    }

    .wheel-segment:last-child {
        border-bottom: none;
    }

    .wheel-segment.spinning-active {
        background-color: var(--hint-color);
        color: white;
    }

    .wheel-segment.highlighted {
        background-color: var(--correct-color);
        color: white;
        font-size: 1.15em; /* ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶∏‡ßá‡¶ó‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßú */
    }

    #modal-spin-action-button {
        background-color: var(--free-hint-btn-bg);
        border: 1px solid var(--free-hint-btn-border);
        color: var(--free-hint-btn-text);
        padding: 12px 25px; /* ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        font-size: 1.15em; /* ‡¶¨‡ßú ‡¶´‡¶®‡ßç‡¶ü */
        border-radius: 30px;
        margin-top: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
    }
    #modal-spin-action-button:hover:not(:disabled) {
         background-color: var(--free-hint-btn-border);
         transform: translateY(-1px);
         box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    #modal-spin-action-button:disabled{
        background-color: var(--tile-disabled-bg);
        border-color: #bdbdbd;
        color: #757575;
        box-shadow: none;
    }
    #modal-spin-action-button.proceed {
        background-color: var(--proceed-spin-bg);
        border-color: var(--proceed-spin-border);
    }
    #modal-spin-action-button.proceed:hover:not(:disabled) {
        background-color: var(--proceed-spin-border);
    }


    #spin-result-message {
        margin-top: 20px;
        min-height: 75px;
        font-weight: bold;
        font-size: 1.05em;
        color: var(--primary-color);
        line-height: 1.5;
    }
</style>
</head>
<body>
    <div class="ad-container" id="top-ad-container">
        <script type="text/javascript">
            atOptions = {
                'key' : '6d27287e4227540933eadd31abe0f678',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/6d27287e4227540933eadd31abe0f678/invoke.js"></script>
    </div>
<div class="game-container">
    <div class="status-bar">
        <span class="status-item" id="level-display">‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ‡ßß</span>
        <span class="status-item" id="score-display">‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü: ‡ß¶</span>
        <span class="status-item" id="hints-display">üí° ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§: ‡ß¶</span>
        <button id="buy-hints-button" class="shop-button">üõí ‡¶ï‡¶ø‡¶®‡ßÅ‡¶® (‡ß´‡ß¶‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá ‡ß®‡¶ü‡¶ø)</button>
    </div>

    <div class="instructions">
        ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶Ö‡¶Ç‡¶∂‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶ú‡¶ø‡¶Ø‡¶º‡ßá ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®:
    </div>

    <div class="jumbled-tiles-container" id="jumbled-tiles"></div>

    <div class="input-area-container">
        <div id="input-display"></div>
    </div>

    <div class="controls">
        <button id="reload-game-button" class="control-button">üîÑ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶∞‡ßÅ</button>
        <button id="backspace-button" class="control-button">üîô ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</button>
        <button id="free-hint-button" class="control-button">üéÅ ‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶®</button>
        <button id="hint-button" class="control-button">üí° ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ (‡¶ñ‡¶∞‡¶ö)</button>
    </div>

    <div id="message-area"></div>
</div>

<!-- Spin Wheel Modal -->
<div id="spin-wheel-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h2>‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶π‡ßÅ‡¶á‡¶≤!</h2>
        <div class="wheel-container">
            <div class="wheel">
                <div class="wheel-segment" data-prize-index="0">‡ß®‡ß¶‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</div>
                <div class="wheel-segment" data-prize-index="1">‡ßß‡¶ü‡¶ø ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§</div>
                <div class="wheel-segment" data-prize-index="2">‡ß´‡ß¶‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</div>
                <div class="wheel-segment" data-prize-index="3">‡¶´‡¶æ‡¶Å‡¶ï‡¶æ</div>
                <div class="wheel-segment" data-prize-index="4">‡ß©‡¶ü‡¶ø ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§</div>
            </div>
        </div>
        <button id="modal-spin-action-button" class="control-button">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="spin-result-message"></p>
    </div>
</div>

<div class="ad-container" id="bottom-ad-container">
    <script type="text/javascript">
        atOptions = {
            'key' : '6d27287e4227540933eadd31abe0f678', // ‡¶è‡¶ï‡¶á ‡¶ï‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßá ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ï‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
        };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/6d27287e4227540933eadd31abe0f678/invoke.js"></script>
</div>

<script src="data.js"></script> <!-- data.js ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶•‡ßá ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá -->
<script>
    // --- Game State Variables ---
    let currentLevel = 1;
    let score = 0;
    let totalHints = 2;
    let correctAnswersInLevel = 0;
    let currentQuestionIndex = -1;
    let availableQuestions = [];
    let usedWordIndices = [];
    let currentWordData = null;
    let jumbledParts = [];
    let selectedParts = [];
    let partTiles = [];
    let isWaiting = false;
    let lastPlayedWordObject = null;
    let freeHintUsedThisWord = false;
    
    let adWindowObject = null;
    const AD_START_TIME_KEY = 'banglaWordGame_adStartTime';
    const AD_REQUIRED_VIEW_TIME_MS = 20000;

    const HINT_COST = 500;
    const HINTS_PER_PURCHASE = 2;

    const LS_HINTS_KEY = 'banglaWordGame_totalHints';
    const LS_SCORE_KEY = 'banglaWordGame_score';

    const gameContainer = document.querySelector('.game-container');
    const levelDisplay = document.getElementById('level-display');
    const scoreDisplay = document.getElementById('score-display');
    const hintsDisplay = document.getElementById('hints-display');
    const buyHintsButton = document.getElementById('buy-hints-button');
    const jumbledTilesContainer = document.getElementById('jumbled-tiles');
    const inputDisplay = document.getElementById('input-display');
    const messageArea = document.getElementById('message-area');

    const reloadGameButton = document.getElementById('reload-game-button');
    const backspaceButton = document.getElementById('backspace-button');
    const freeHintButton = document.getElementById('free-hint-button');
    const hintButton = document.getElementById('hint-button');

    const spinWheelModal = document.getElementById('spin-wheel-modal');
    const modalSpinActionButton = document.getElementById('modal-spin-action-button');
    const spinResultMessage = document.getElementById('spin-result-message');

    const prizes = [
        { name: "‡ß®‡ß¶‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü", type: 'points', value: 200, segmentIndex: 0 },
        { name: "‡ßß‡¶ü‡¶ø ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§", type: 'hints', value: 1, segmentIndex: 1 },
        { name: "‡ß´‡ß¶‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü", type: 'points', value: 500, segmentIndex: 2 },
        { name: "‡¶´‡¶æ‡¶Å‡¶ï‡¶æ", type: 'empty', segmentIndex: 3, nameBangla: "‡¶´‡¶æ‡¶Å‡¶ï‡¶æ" },
        { name: "‡ß©‡¶ü‡¶ø ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§", type: 'hints', value: 3, segmentIndex: 4 }
    ];

    // --- Audio Elements ---
    // Ensure win.mp3, button.mp3, and error.mp3 are in the same directory or provide correct path
    const buttonClickSound = new Audio('Sub/button.mp3');
    const winSound = new Audio('Sub/win.mp3');
    const errorSound = new Audio('Sub/error.mp3');


    function playSound(audioElement) {
        if (audioElement) {
            audioElement.currentTime = 0; 
            audioElement.play().catch(error => console.warn("Error playing sound:", error)); 
        }
    }


    function shuffleArray(array) {
        let newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
    }

    function initializeGameState() {
        const savedHints = localStorage.getItem(LS_HINTS_KEY);
        totalHints = savedHints !== null ? parseInt(savedHints, 10) : 2;

        const savedScore = localStorage.getItem(LS_SCORE_KEY);
        score = savedScore !== null ? parseInt(savedScore, 10) : 0;

        localStorage.setItem(LS_HINTS_KEY, totalHints);
        localStorage.setItem(LS_SCORE_KEY, score);

        currentLevel = 1;
        correctAnswersInLevel = 0;
        usedWordIndices = [];
        freeHintUsedThisWord = false;
    }

    function updateUI() {
        levelDisplay.textContent = `‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ${currentLevel}`;
        scoreDisplay.textContent = `‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü: ${score}`;
        hintsDisplay.textContent = `üí° ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§: ${totalHints}`;

        localStorage.setItem(LS_HINTS_KEY, totalHints);
        localStorage.setItem(LS_SCORE_KEY, score);

        const wordCompletedOrNoWord = !currentWordData || (currentWordData && selectedParts.length >= currentWordData.parts.length);
        const noMoreQuestions = availableQuestions.length === 0 && wordCompletedOrNoWord;

        buyHintsButton.disabled = score < HINT_COST || isWaiting;
        hintButton.disabled = totalHints <= 0 || wordCompletedOrNoWord || noMoreQuestions || isWaiting;
        freeHintButton.disabled = freeHintUsedThisWord || wordCompletedOrNoWord || noMoreQuestions || isWaiting;
        backspaceButton.disabled = selectedParts.length === 0 || wordCompletedOrNoWord || noMoreQuestions || isWaiting;
        reloadGameButton.disabled = isWaiting && currentWordData != null && spinWheelModal.style.display === 'none';
    }

    function showGameMessage(text, type = '') {
        messageArea.textContent = text;
        messageArea.className = type;
         if (type !== 'correct' && type !== 'level-up' && type !== 'incorrect') {
              setTimeout(() => {
                   if (messageArea.textContent === text) { 
                       showGameMessage("", "");
                   }
              }, type === 'info' ? 6000 : 4000); 
          }
    }

    function filterQuestionsForLevel() {
        if (typeof wordData === 'undefined' || wordData.length === 0) {
            console.error("wordData is not defined or empty. Make sure data.js is loaded correctly.");
            availableQuestions = [];
            return;
        }
        let potentialQuestions = wordData.filter((q, index) =>
            q.minLevel <= currentLevel && !usedWordIndices.includes(index)
        );
        if (potentialQuestions.length > 1 && lastPlayedWordObject !== null) {
            const tempFiltered = potentialQuestions.filter(q => q.word !== lastPlayedWordObject.word);
            if (tempFiltered.length > 0) potentialQuestions = tempFiltered;
        }
        availableQuestions = potentialQuestions;
    }

    function loadQuestion() {
        lastPlayedWordObject = currentWordData;
        isWaiting = true;
        freeHintUsedThisWord = false;

        filterQuestionsForLevel();

        if (availableQuestions.length === 0) {
             if (typeof wordData !== 'undefined' && usedWordIndices.length === wordData.length) {
                showGameMessage("‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶¨ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶∏‡¶æ‡¶ú‡¶ø‡¶Ø‡¶º‡ßá ‡¶´‡ßá‡¶≤‡ßá‡¶õ‡ßá‡¶®!", "level-up");
            } else {
                showGameMessage("‡¶è‡¶á ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶§‡ßÅ‡¶® ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶®‡ßá‡¶á ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∏‡¶¨ ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶∂‡ßá‡¶∑‡•§", "info");
            }
            jumbledTilesContainer.innerHTML = "";
            inputDisplay.textContent = "‡¶∏‡¶Æ‡¶æ‡¶™‡ßç‡¶§";
            currentWordData = null;
            isWaiting = false;
            updateUI();
            return;
        }

        const randomIndex = Math.floor(Math.random() * availableQuestions.length);
        currentWordData = availableQuestions[randomIndex];
         if (typeof wordData !== 'undefined') {
            currentQuestionIndex = wordData.findIndex(q => q.word === currentWordData.word && q.parts.join('') === currentWordData.parts.join(''));
        }


        jumbledParts = shuffleArray(currentWordData.parts);
        selectedParts = [];
        partTiles = [];

        renderTiles();
        updateInputDisplay();
        showGameMessage("", "");
        isWaiting = false;
        updateUI();
    }

    function renderTiles() {
        jumbledTilesContainer.innerHTML = '';
        partTiles = [];
        jumbledParts.forEach((part) => {
            const tile = document.createElement('button');
            tile.classList.add('tile');
            tile.textContent = part;
            tile.onclick = () => handleTileClick(part, tile);
            jumbledTilesContainer.appendChild(tile);
            partTiles.push(tile);
        });
    }

    function handleTileClick(part, tileElement) {
        playSound(buttonClickSound);
        if (isWaiting || tileElement.disabled || !currentWordData) return;
        isWaiting = true;

        tileElement.classList.add('disabled');
        tileElement.disabled = true;
        selectedParts.push({ part: part, tileElement: tileElement });
        updateInputDisplay();

        if (selectedParts.length === currentWordData.parts.length) {
            checkWord();
        } else {
            isWaiting = false;
        }
        updateUI();
    }

    function updateInputDisplay() {
        inputDisplay.textContent = selectedParts.map(item => item.part).join('');
    }

    function handleBackspace() {
        playSound(buttonClickSound);
        if (isWaiting || selectedParts.length === 0 || !currentWordData || (currentWordData && selectedParts.length >= currentWordData.parts.length)) {
            return;
        }
        isWaiting = true;
        const lastSelected = selectedParts.pop();
        if (lastSelected && lastSelected.tileElement) {
            lastSelected.tileElement.disabled = false;
            lastSelected.tileElement.classList.remove('disabled');
        }
        updateInputDisplay();
        showGameMessage("", "");
        isWaiting = false;
        updateUI();
    }

    function applyPaidHintLogic() {
        const nextCorrectPartIndex = selectedParts.length;
        const correctNextPart = currentWordData.parts[nextCorrectPartIndex];
        let hintTileElement = null;
        for (const tile of partTiles) {
            if (tile.textContent === correctNextPart && !tile.disabled) {
                hintTileElement = tile;
                break;
            }
        }

        if (hintTileElement) {
            hintTileElement.classList.add('disabled');
            hintTileElement.disabled = true;
            selectedParts.push({ part: correctNextPart, tileElement: hintTileElement });
            updateInputDisplay();
            if (selectedParts.length === currentWordData.parts.length) {
                checkWord();
            } else {
                isWaiting = false;
            }
            return true;
        }
        isWaiting = false;
        return false;
    }

    function usePaidHint() {
        playSound(buttonClickSound);
        if (isWaiting || totalHints <= 0 || !currentWordData || selectedParts.length >= currentWordData.parts.length) {
             if (totalHints <= 0) showGameMessage("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶®‡ßá‡¶á‡•§ ‡¶¶‡ßã‡¶ï‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®!", "info");
             else if (currentWordData && selectedParts.length >= currentWordData.parts.length) showGameMessage("‡¶∂‡¶¨‡ßç‡¶¶ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§", "info");
             else if (!currentWordData) showGameMessage("‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶®‡ßá‡¶á‡•§", "info");
             updateUI();
             return;
        }
        isWaiting = true;
        if (applyPaidHintLogic()) {
            totalHints--;
            showGameMessage("‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã!", "info");
        } else {
            showGameMessage("‡¶â‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!", "info");
        }
        updateUI();
    }

    function openFreeSpinModal() {
        playSound(buttonClickSound);
        if (isWaiting || !currentWordData || (currentWordData && selectedParts.length >= currentWordData.parts.length)) {
            if (!currentWordData) showGameMessage("‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶®‡ßá‡¶á‡•§", "info");
            else if (currentWordData && selectedParts.length >= currentWordData.parts.length) showGameMessage("‡¶∂‡¶¨‡ßç‡¶¶ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§", "info");
            updateUI();
            return;
        }
        if (freeHintUsedThisWord) {
            showGameMessage("‡¶è‡¶á ‡¶∂‡¶¨‡ßç‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§", "info");
            updateUI();
            return;
        }

        alert(`‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶™‡ßá‡¶§‡ßá, ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶æ‡ßü ${AD_REQUIRED_VIEW_TIME_MS / 1000} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ ‡¶è‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ó‡ßá‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§`);

        isWaiting = true;
        updateUI(); 

        const adStartTime = localStorage.getItem(AD_START_TIME_KEY);

        if (adStartTime) {
            const elapsedTime = Date.now() - parseInt(adStartTime, 10);
            if (elapsedTime >= AD_REQUIRED_VIEW_TIME_MS) {
                modalSpinActionButton.textContent = '‚úÖ ‡¶è‡¶ñ‡¶® ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!';
                modalSpinActionButton.classList.add('proceed');
                modalSpinActionButton.onclick = proceedWithActualSpin;
                modalSpinActionButton.disabled = false;
                spinResultMessage.innerHTML = `‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! <br><strong>‡¶è‡¶ñ‡¶® ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</strong> ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
            } else {
                const remainingTime = Math.ceil((AD_REQUIRED_VIEW_TIME_MS - elapsedTime) / 1000);
                modalSpinActionButton.textContent = 'üåÄ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
                modalSpinActionButton.classList.remove('proceed');
                modalSpinActionButton.onclick = initiateAdViewForSpin;
                modalSpinActionButton.disabled = false;
                spinResultMessage.innerHTML = `‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶ü‡¶ø ‡¶Ü‡¶∞‡¶ì ‡¶™‡ßç‡¶∞‡¶æ‡ßü ${remainingTime} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ <br>‡¶è‡¶∞‡¶™‡¶∞‡ßá ‡¶ó‡ßá‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá "üéÅ ‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶®" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®, ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶è‡¶ñ‡¶®‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§`;
            }
        } else {
            modalSpinActionButton.textContent = 'üåÄ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
            modalSpinActionButton.classList.remove('proceed');
            modalSpinActionButton.onclick = initiateAdViewForSpin;
            modalSpinActionButton.disabled = false;
            spinResultMessage.innerHTML = '‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶™‡ßá‡¶§‡ßá, ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§<br>"‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®‡•§';
        }

        spinWheelModal.style.display = 'flex';
        const modalSegments = spinWheelModal.querySelectorAll('.wheel-segment');
        modalSegments.forEach(seg => seg.classList.remove('highlighted', 'spinning-active'));
    }

    function initiateAdViewForSpin() {
        playSound(buttonClickSound);
        if (modalSpinActionButton.disabled) return;
        modalSpinActionButton.disabled = true;

        const adURL = 'https://www.profitableratecpm.com/frzvssq75h?key=576ae41d83bfb276b67e431d5ef5cd8e';
        adWindowObject = window.open(adURL, '_blank');

        if (!adWindowObject || adWindowObject.closed || typeof adWindowObject.closed == 'undefined') {
            spinResultMessage.innerHTML = `‡¶™‡¶™-‡¶Ü‡¶™ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ <br>‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶è‡¶á ‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶™-‡¶Ü‡¶™ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
            modalSpinActionButton.disabled = false; 
            return;
        }

        localStorage.setItem(AD_START_TIME_KEY, Date.now().toString());
        spinWheelModal.style.display = 'none'; 
        showGameMessage(`‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶æ‡ßü ${AD_REQUIRED_VIEW_TIME_MS / 1000} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§ ‡¶è‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶ó‡ßá‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§ <br>‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑‡ßá ‡¶è‡¶á ‡¶ó‡ßá‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá "üéÅ ‡¶´‡ßç‡¶∞‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶®" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶®‡•§`, "info");
        
        isWaiting = false; 
        updateUI(); 
    }

    function buyHints() {
        playSound(buttonClickSound);
        if (isWaiting) return;
        if (score >= HINT_COST) {
            isWaiting = true;
            score -= HINT_COST;
            totalHints += HINTS_PER_PURCHASE;
            showGameMessage(`‡¶Ü‡¶™‡¶®‡¶ø ${HINTS_PER_PURCHASE}‡¶ü‡¶ø ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶ï‡¶ø‡¶®‡ßá‡¶õ‡ßá‡¶®!`, "shop");
            updateUI();
            setTimeout(() => { isWaiting = false; updateUI(); }, 300);
        } else {
            showGameMessage(`‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶ï‡¶ø‡¶®‡¶§‡ßá ${HINT_COST} ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§`, "incorrect");
        }
    }

    function checkWord() {
        if (!currentWordData) {
            isWaiting = false;
            updateUI();
            return;
        }

        const formedWord = selectedParts.map(item => item.part).join('');
        const isCorrect = formedWord === currentWordData.word;

        if (isCorrect) {
            playSound(winSound);
            score += 5;
            correctAnswersInLevel++;
            if (currentQuestionIndex !== -1 && !usedWordIndices.includes(currentQuestionIndex)) {
                usedWordIndices.push(currentQuestionIndex);
            }
            showGameMessage("‡¶∏‡¶†‡¶ø‡¶ï! üòä", "correct");
            
            gameContainer.classList.add('game-container-victory');
            setTimeout(() => {
                gameContainer.classList.remove('game-container-victory');
            }, 1000); 

            partTiles.forEach(tile => tile.disabled = true);
            const delay = 1200;
            if (correctAnswersInLevel >= 3) {
                setTimeout(levelUp, delay);
            } else {
                setTimeout(loadQuestion, delay);
            }
        } else {
            score -= 5;
            if (score < 0) score = 0;
            handleGameOver(); // This will now play error sound and show angry emoji
        }
        updateUI();
    }

    function handleGameOver() {
        playSound(errorSound);
        showGameMessage("‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞! üò† ‡¶ó‡ßá‡¶Æ‡¶ü‡¶ø ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ßß ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶ì ‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá‡•§", "incorrect");
        
        // Loser effect
        gameContainer.classList.add('game-container-lose');
        setTimeout(() => {
            gameContainer.classList.remove('game-container-lose');
        }, 1000); // Effect lasts for 1 second

        currentLevel = 1;
        correctAnswersInLevel = 0;
        updateUI();
        setTimeout(() => {
             isWaiting = false;
             loadQuestion();
        }, 3000);
    }

    function levelUp() {
        currentLevel++;
        correctAnswersInLevel = 0;
        showGameMessage(`‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£! ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ${currentLevel}-‡¶è ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! üéâ`, "level-up");
        setTimeout(loadQuestion, 1500);
    }

    function reloadGame() {
        playSound(buttonClickSound);
        if (isWaiting && currentWordData && spinWheelModal.style.display === 'none') {
            showGameMessage("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...", "info");
            return;
        }
        isWaiting = true;

        initializeGameState(); 
        localStorage.removeItem(AD_START_TIME_KEY); 

        showGameMessage("‡¶ó‡ßá‡¶Æ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", "info");
        jumbledTilesContainer.innerHTML = "";
        inputDisplay.textContent = "";
        currentWordData = null;
        lastPlayedWordObject = null;

        if(adWindowObject && !adWindowObject.closed) {
            // adWindowObject.close(); 
        }
        adWindowObject = null;
        spinWheelModal.style.display = 'none'; 

        modalSpinActionButton.textContent = 'üåÄ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
        modalSpinActionButton.classList.remove('proceed');
        modalSpinActionButton.onclick = initiateAdViewForSpin;
        modalSpinActionButton.disabled = false;

        setTimeout(() => {
            isWaiting = false;
            loadQuestion(); 
        }, 500);
    }

    function proceedWithActualSpin() {
        playSound(buttonClickSound);
        if (modalSpinActionButton.disabled) return;
        modalSpinActionButton.disabled = true;
        modalSpinActionButton.classList.remove('proceed');
        spinResultMessage.textContent = '‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
        localStorage.removeItem(AD_START_TIME_KEY); 

        let spinDuration = 2500;
        let intervalTime = 80;
        let cycles = Math.floor(spinDuration / intervalTime);
        let currentSegmentIdx = 0;
        let spinCount = 0;

        const modalWheelSegments = spinWheelModal.querySelectorAll('.wheel-segment');

        const spinAnimation = setInterval(() => {
            modalWheelSegments.forEach(seg => seg.classList.remove('spinning-active'));
            if (modalWheelSegments.length > 0 && modalWheelSegments[currentSegmentIdx % modalWheelSegments.length]) {
                 modalWheelSegments[currentSegmentIdx % modalWheelSegments.length].classList.add('spinning-active');
            }
            currentSegmentIdx++;
            spinCount++;

            if (spinCount >= cycles) {
                clearInterval(spinAnimation);
                selectFinalPrize(modalWheelSegments);
            }
        }, intervalTime);
    }

    function selectFinalPrize(segmentsToHighlight) {
        const randomIndex = Math.floor(Math.random() * prizes.length);
        const wonPrize = prizes[randomIndex];

        segmentsToHighlight.forEach(seg => seg.classList.remove('spinning-active'));
        if (wonPrize.segmentIndex < segmentsToHighlight.length && segmentsToHighlight[wonPrize.segmentIndex]) {
             segmentsToHighlight[wonPrize.segmentIndex].classList.add('highlighted');
        }

        let message = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®: ${wonPrize.name}!`;
        let gameMessageType = 'info'; 

        if (wonPrize.type === 'points') {
            score += wonPrize.value;
            gameMessageType = 'shop';
        } else if (wonPrize.type === 'hints') {
            totalHints += wonPrize.value;
            gameMessageType = 'info';
        } else if (wonPrize.type === 'empty') {
            message = `‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶è‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶æ‡¶®‡¶®‡¶ø‡•§ (${wonPrize.nameBangla || wonPrize.name})`;
            gameMessageType = 'incorrect';
        }

        spinResultMessage.textContent = message; 
        showGameMessage(message, gameMessageType); 

        freeHintUsedThisWord = true; 

        setTimeout(() => {
            spinWheelModal.style.display = 'none';
            isWaiting = false; 
            updateUI(); 

            modalSpinActionButton.textContent = 'üåÄ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
            modalSpinActionButton.classList.remove('proceed');
            modalSpinActionButton.onclick = initiateAdViewForSpin;
            modalSpinActionButton.disabled = false;

            if(adWindowObject && !adWindowObject.closed){
                // adWindowObject.close(); 
            }
            adWindowObject = null;
        }, 2200);
    }

    document.addEventListener('DOMContentLoaded', () => {
        if (typeof wordData === 'undefined') {
            console.error("wordData is not defined. Make sure data.js is loaded before this script or included in the HTML.");
            window.wordData = [];
            showGameMessage("‡¶∂‡¶¨‡ßç‡¶¶‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶ü‡¶ø ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", "incorrect");
        }

        initializeGameState();

        reloadGameButton.onclick = reloadGame;
        backspaceButton.onclick = handleBackspace;
        freeHintButton.onclick = openFreeSpinModal; 
        hintButton.onclick = usePaidHint;
        buyHintsButton.onclick = buyHints;

        modalSpinActionButton.onclick = initiateAdViewForSpin; 

        loadQuestion(); 
    });
</script>
</body>
</html>